{"version":3,"sources":["kendo.gantt.js"],"names":["f","define","$","normalizeText","text","String","replace","REPLACE_REGEX","SPACE","objectKey","object","key","parts","push","sort","join","hashKey","str","i","hash","length","charCodeAt","zeroSize","width","height","baseline","measureText","style","measureBox","TextMetrics","current","measure","LRUCache","DEFAULT_OPTIONS","defaultMeasureBox","window","kendo","util","Class","extend","init","size","this","_size","_length","_map","put","value","map","entry","_head","_tail","newer","older","get","baselineMarkerSize","document","createElement","cssText","options","_cache","styleKey","cacheKey","cachedResult","baselineMarker","textStr","box","_baselineMarker","cloneNode","textContent","appendChild","body","offsetWidth","offsetHeight","offsetTop","parentNode","removeChild","marker","deepExtend","jQuery","amd","a1","a2","a3","undefined","selector","uid","attr","trimOptions","name","prefix","remove","edit","add","navigate","focusTable","table","direct","wrapper","parents","scrollPositions","scrollableParents","TABINDEX","each","index","parent","scrollTop","setActive","e","focus","element","parentsUntil","filter","computedStyle","getComputedStyles","overflow","defaultCommands","keys","F10","supportsMedia","mobileOS","support","Widget","ui","ObservableObject","data","ObservableArray","Query","isArray","Array","inArray","isFunction","proxy","isPlainObject","outerWidth","_outerWidth","outerHeight","_outerHeight","defaultIndicatorWidth","NS","PERCENTAGE_FORMAT","CLICK","STRING","ARIA_DESCENDANT","ARIA_LABEL","ACTIVE_CELL","DOT","TASK_DELETE_CONFIRM","DEPENDENCY_DELETE_CONFIRM","TOGGLE_BUTTON_TEMPLATE","template","BUTTON_TEMPLATE","COMMAND_BUTTON_TEMPLATE","VIEWS_DROPDOWN_TEMPLATE","HEADER_VIEWS_TEMPLATE","ganttStyles","plannedTasks","rowHeight","content","listWrapper","list","timelineWrapper","timeline","splitBarWrapper","splitBar","splitBarHover","popupWrapper","popupList","resizeHandle","icon","item","line","buttonDelete","buttonCancel","buttonSave","buttonToggle","primary","hovered","selected","focused","gridHeader","gridHeaderWrap","gridContent","tasks","popup","form","editForm","formContainer","resourcesFormContainer","message","buttonsContainer","button","editField","editLabel","resourcesField","toolbar","headerWrapper","footerWrapper","views","viewsWrapper","viewsDropdown","iconPlus","iconPdf","iconToggle","viewButtonDefault","viewButton","link","pdfButton","appendButton","Gantt","events","dataSource","append","action","className","styles","iconClass","pdf","fn","call","_events","_wrapper","_resources","_timeline","_toolbar","_footer","_adjustDimensions","_preventRefresh","view","_selectedViewName","_dataSource","_assignments","_dropDowns","_list","_dependencies","_resizable","_scrollable","_dataBind","_attachEvents","_createEditor","notify","autoBind","navigatable","selectable","editable","resizable","columnResizeHandleWidth","columns","dependencies","resources","assignments","taskTemplate","messages","save","cancel","destroy","deleteTaskConfirmation","deleteDependencyConfirmation","deleteTaskWindowTitle","deleteDependencyWindowTitle","day","week","month","year","start","end","actions","addChild","insertBefore","insertAfter","editor","editorTitle","resourcesEditorTitle","title","plannedStart","plannedEnd","percentComplete","assignButton","resourcesHeader","unitsHeader","switchText","offsetTooltipAdvanced","offsetTooltipDelay","seconds","minutes","hours","days","showWorkHours","showWorkDays","workDayStart","Date","workDayEnd","workWeekStart","workWeekEnd","hourSpan","snap","listWidth","showPlannedTasks","select","find","trigger","clearSelection","unbind","_refreshHandler","_progressHandler","_errorHandler","_dependencyRefreshHandler","_dependencyErrorHandler","footerDropDown","headerDropDown","_editor","_resizeDraggable","off","_mediaQuery","removeListener","_mediaQueryHandler","_resizeHandler","footer","setOptions","selectedView","newOptions","isSettings","type","empty","_setEvents","resize","on","matches","splitBarHandleClassName","addClass","layout","appendTo","css","treelistWrapper","splitbar","toggleButton","that","viewsSelector","viewsDropdownSelector","pdfSelector","toggleSelector","contentSelector","treelist","mediaQueryHandler","removeClass","refresh","_resize","_actions","ns","prepend","toggeSwitchWrap","matchMedia","addListener","val","preventDefault","children","focusedViewIndex","_focusedView","closest","keyCode","RIGHT","LEFT","ENTER","SPACEBAR","_viewByIndex","toLowerCase","saveAsPDF","is","relatedTarget","expanded","html","create","_createButton","_createPlannedTasksSwitch","command","commandName","Error","split","toolbarHeight","footerHeight","totalHeight","totalWidth","splitBarWidth","treeListWidth","timelineWidth","_scrollTo","scrollTarget","id","scrollIntoView","actionsSelector","actionMessages","handler","orderId","task","_createNewModel","dataItem","taskParent","firstSlot","_timeSlots","target","set","_createTask","gantt","TaskDropDown","eq","direction","animation","open","effects","bind","_getListEditable","update","reorder","mode","move","reorderable","_getListOptions","ganttListOptions","filterable","columnMenu","field","_attachResourceEditor","column","_createResourceEditor","_attachListEvents","toggleButtons","restoreFocus","_cachedCurrent","rowIndex","columnIndex","_current","oldIndex","newIndex","oldWidth","newWidth","_navigatable","container","model","cell","_preventItemChange","closeCell","updatedValues","values","updateDuration","duration","updatePlannedDuration","plannedDuration","hasOwnProperty","previousStart","getTime","previousPlannedStart","updateInfo","hasChanges","cancelChanges","_updateAssignments","_requestStart","sync","then","selection","removeAttr","row","position","parentId","source","dir","_updateTask","listElement","listOptions","GanttList","GanttTimeline","viewName","getByUid","resizeStart","dependency","predecessorId","predecessor","successorId","successor","_createDependency","editTask","removeTask","removeDependency","_error","GanttDataSource","refreshDependencies","GanttDependencyDataSource","dataTextField","dataColorField","dataFormatField","DataSource","_assignmentsRefreshHandler","dataTaskIdField","dataResourceIdField","dataValueField","PopupEditor","createButton","_createPopupButton","cancelTask","saveTask","_onDialogClose","unitsValidation","step","assignmentsModel","schema","fields","Units","validation","_resourceEditor","ResourceEditor","_wrapResourceData","buttons","range","_render","taskTree","_renderDependencies","date","_scrollToDate","_modelFromElement","setDataSource","fetch","setDependenciesDataSource","items","assignment","resource","j","newLength","taskId","resourceId","hasMatch","operator","toArray","_updateAssignment","splice","_removeAssignment","shift","_createAssignment","close","taskCopy","toJSON","_editTask","_syncDataSource","resourceValueField","_taskConfirm","_removeTask","insert","_scrollToUid","_preventDependencyRefresh","resourceValue","_dependencyConfirm","_removeDependency","_removeTaskDependencies","_removeTaskAssignments","callback","_confirm","confirmation","click","showDialog","scrollToUid","cachedUid","cachedIndex","_progress","_assignResources","_renderTree","groupAssigments","group","assigments","applyTaskResource","setter","wrapTask","resourcedId","valueFormat","formatedValue","toString","color","result","taskAssignments","valuePerResource","format","toggle","progress","timelineScroll","treeListWrapper","hover","kendoResizable","orientation","handle","scrollLeft","delta","x","initialDelta","isRtl","_renderCurrentTime","headerSelector","timelineHeader","timelineContent","treeListHeader","treeListContent","wheelDeltaY","currentTarget","one","cellIndex","headerTable","contentTable","tables","expandState","collapse","expand","scroll","reverse","scrollVertical","_rowHeight","moveVertical","method","sibling","first","moveHorizontal","subling","toggleExpandedState","summary","deleteAction","selectedTask","isInput","ctrlKey","_focusTimeout","setTimeout","itemToFocus","focusableItems","_getToolbarItems","idx","shiftKey","TAB","DELETE","isCell","altKey","UP","DOWN","_startEditHandler","stopPropagation","tagName","concat","activeElement","_activeElement","promises","when","apply","done","_adjustHeight","switchLabel","plannedToggle","Switch","checked","change","_togglePlannedTasks","unchecked","toggleSwitch","toggleClass","_setPlanned","PDFMixin","_drawPDF","listTableWidth","clone","_drawPDFShadow","avoidLinks","plugin"],"mappings":"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","file":"kendo.gantt.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/text-metrics', ['kendo.core'], f);\n}(function () {\n    (function ($) {\n        window.kendo.util = window.kendo.util || {};\n        var LRUCache = kendo.Class.extend({\n            init: function (size) {\n                this._size = size;\n                this._length = 0;\n                this._map = {};\n            },\n            put: function (key, value) {\n                var map = this._map;\n                var entry = {\n                    key: key,\n                    value: value\n                };\n                map[key] = entry;\n                if (!this._head) {\n                    this._head = this._tail = entry;\n                } else {\n                    this._tail.newer = entry;\n                    entry.older = this._tail;\n                    this._tail = entry;\n                }\n                if (this._length >= this._size) {\n                    map[this._head.key] = null;\n                    this._head = this._head.newer;\n                    this._head.older = null;\n                } else {\n                    this._length++;\n                }\n            },\n            get: function (key) {\n                var entry = this._map[key];\n                if (entry) {\n                    if (entry === this._head && entry !== this._tail) {\n                        this._head = entry.newer;\n                        this._head.older = null;\n                    }\n                    if (entry !== this._tail) {\n                        if (entry.older) {\n                            entry.older.newer = entry.newer;\n                            entry.newer.older = entry.older;\n                        }\n                        entry.older = this._tail;\n                        entry.newer = null;\n                        this._tail.newer = entry;\n                        this._tail = entry;\n                    }\n                    return entry.value;\n                }\n            }\n        });\n        var REPLACE_REGEX = /\\r?\\n|\\r|\\t/g;\n        var SPACE = ' ';\n        function normalizeText(text) {\n            return String(text).replace(REPLACE_REGEX, SPACE);\n        }\n        function objectKey(object) {\n            var parts = [];\n            for (var key in object) {\n                parts.push(key + object[key]);\n            }\n            return parts.sort().join('');\n        }\n        function hashKey(str) {\n            var hash = 2166136261;\n            for (var i = 0; i < str.length; ++i) {\n                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n                hash ^= str.charCodeAt(i);\n            }\n            return hash >>> 0;\n        }\n        function zeroSize() {\n            return {\n                width: 0,\n                height: 0,\n                baseline: 0\n            };\n        }\n        var DEFAULT_OPTIONS = { baselineMarkerSize: 1 };\n        var defaultMeasureBox;\n        if (typeof document !== 'undefined') {\n            defaultMeasureBox = document.createElement('div');\n            defaultMeasureBox.style.cssText = 'position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;' + 'padding: 0 !important; margin: 0 !important; border: 0 !important;' + 'line-height: normal !important; visibility: hidden !important; white-space: pre!important;';\n        }\n        var TextMetrics = kendo.Class.extend({\n            init: function (options) {\n                this._cache = new LRUCache(1000);\n                this.options = $.extend({}, DEFAULT_OPTIONS, options);\n            },\n            measure: function (text, style, options) {\n                if (options === void 0) {\n                    options = {};\n                }\n                if (typeof text === 'undefined' || text === null) {\n                    return zeroSize();\n                }\n                var styleKey = objectKey(style);\n                var cacheKey = hashKey(text + styleKey);\n                var cachedResult = this._cache.get(cacheKey);\n                if (cachedResult) {\n                    return cachedResult;\n                }\n                var size = zeroSize();\n                var measureBox = options.box || defaultMeasureBox;\n                var baselineMarker = this._baselineMarker().cloneNode(false);\n                for (var key in style) {\n                    var value = style[key];\n                    if (typeof value !== 'undefined') {\n                        measureBox.style[key] = value;\n                    }\n                }\n                var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n                measureBox.textContent = textStr;\n                measureBox.appendChild(baselineMarker);\n                document.body.appendChild(measureBox);\n                if (textStr.length) {\n                    size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n                    size.height = measureBox.offsetHeight;\n                    size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n                }\n                if (size.width > 0 && size.height > 0) {\n                    this._cache.put(cacheKey, size);\n                }\n                measureBox.parentNode.removeChild(measureBox);\n                return size;\n            },\n            _baselineMarker: function () {\n                var marker = document.createElement('div');\n                marker.style.cssText = 'display: inline-block; vertical-align: baseline;width: ' + this.options.baselineMarkerSize + 'px; height: ' + this.options.baselineMarkerSize + 'px;overflow: hidden;';\n                return marker;\n            }\n        });\n        TextMetrics.current = new TextMetrics();\n        function measureText(text, style, measureBox) {\n            return TextMetrics.current.measure(text, style, measureBox);\n        }\n        kendo.deepExtend(kendo.util, {\n            LRUCache: LRUCache,\n            TextMetrics: TextMetrics,\n            measureText: measureText,\n            objectKey: objectKey,\n            hashKey: hashKey,\n            normalizeText: normalizeText\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.gantt', [\n        'kendo.data',\n        'kendo.resizable',\n        'kendo.switch',\n        'kendo.gantt.data',\n        'kendo.gantt.editors',\n        'kendo.gantt.list',\n        'kendo.gantt.timeline',\n        'kendo.pdf'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'gantt',\n        name: 'Gantt',\n        category: 'web',\n        description: 'The Gantt component.',\n        depends: [\n            'data',\n            'resizable',\n            'switch',\n            'gantt.data',\n            'gantt.editors',\n            'gantt.list',\n            'gantt.timeline',\n            'pdf'\n        ]\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, keys = $.extend({ F10: 121 }, kendo.keys), supportsMedia = 'matchMedia' in window, mobileOS = kendo.support.mobileOS, Widget = kendo.ui.Widget, ObservableObject = kendo.data.ObservableObject, ObservableArray = kendo.data.ObservableArray, Query = kendo.data.Query, isArray = Array.isArray, inArray = $.inArray, isFunction = kendo.isFunction, proxy = $.proxy, extend = $.extend, isPlainObject = $.isPlainObject, outerWidth = kendo._outerWidth, outerHeight = kendo._outerHeight, defaultIndicatorWidth = 3, NS = '.kendoGantt', PERCENTAGE_FORMAT = 'p0', TABINDEX = 'tabIndex', CLICK = 'click', STRING = 'string', ARIA_DESCENDANT = 'aria-activedescendant', ARIA_LABEL = 'aria-label', ACTIVE_CELL = 'gantt_active_cell', DOT = '.', TASK_DELETE_CONFIRM = 'Are you sure you want to delete this task?', DEPENDENCY_DELETE_CONFIRM = 'Are you sure you want to delete this dependency?', TOGGLE_BUTTON_TEMPLATE = kendo.template('<button class=\"#=styles.buttonToggle#\" type=\"button\" ' + ARIA_LABEL + '=\"Toggle\"><span class=\"#=styles.iconToggle#\"></span></button>'), BUTTON_TEMPLATE = '<button class=\"#=styles.button# #=className#\" type=\"button\" ' + '#if (action) {#' + 'data-action=\"#=action#\"' + '#}#' + '><span class=\"#=iconClass#\"></span><span class=\"k-button-text\">#=text#</span></button>', COMMAND_BUTTON_TEMPLATE = '<a class=\"#=className#\" #=attr# href=\"\\\\#\">#=text#</a>', VIEWS_DROPDOWN_TEMPLATE = kendo.template('<select class=\"k-dropdown #= styles.viewsDropdown #\">' + '#for(var view in views){#' + '<option value=\"#=view#\">#=views[view].title#</option>' + '#}#' + '</select>'), HEADER_VIEWS_TEMPLATE = kendo.template('<div class=\"#=styles.viewsWrapper#\">' + '<span class=\"k-button-group #=styles.views#\">' + '#for(var view in views){#' + '<button type=\"button\" class=\"#=styles.button# #=styles.viewButton#-#= view.toLowerCase() #\" data-#=ns#name=\"#=view#\"><span class=\"k-button-text\">#=views[view].title#</span></button>' + '#}#' + '</span>' + '</div>');\n        var ganttStyles = {\n            wrapper: 'k-widget k-gantt',\n            plannedTasks: 'k-gantt-planned',\n            rowHeight: 'k-gantt-rowheight',\n            content: 'k-gantt-content',\n            listWrapper: 'k-gantt-treelist',\n            list: 'k-gantt-treelist',\n            timelineWrapper: 'k-gantt-timeline',\n            timeline: 'k-gantt-timeline',\n            splitBarWrapper: 'k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal',\n            splitBar: 'k-splitbar',\n            splitBarHover: 'k-splitbar-horizontal-hover',\n            popupWrapper: 'k-list-container',\n            popupList: 'k-list k-reset',\n            resizeHandle: 'k-resize-handle',\n            icon: 'k-icon',\n            item: 'k-item',\n            line: 'k-gantt-line',\n            buttonDelete: 'k-gantt-delete',\n            buttonCancel: 'k-gantt-cancel',\n            buttonSave: 'k-gantt-update',\n            buttonToggle: 'k-gantt-toggle',\n            primary: 'k-primary',\n            hovered: 'k-state-hover',\n            selected: 'k-state-selected',\n            focused: 'k-state-focused',\n            gridHeader: 'k-grid-header',\n            gridHeaderWrap: 'k-grid-header-wrap',\n            gridContent: 'k-grid-content',\n            tasks: 'k-gantt-tasks',\n            popup: {\n                form: 'k-popup-edit-form',\n                editForm: 'k-gantt-edit-form',\n                formContainer: 'k-edit-form-container',\n                resourcesFormContainer: 'k-resources-form-container',\n                message: 'k-popup-message',\n                buttonsContainer: 'k-edit-buttons k-state-default',\n                button: 'k-button',\n                editField: 'k-edit-field',\n                editLabel: 'k-edit-label',\n                resourcesField: 'k-gantt-resources'\n            },\n            toolbar: {\n                headerWrapper: 'k-gantt-header k-toolbar k-gantt-toolbar',\n                footerWrapper: 'k-gantt-footer k-toolbar k-gantt-toolbar',\n                toolbar: 'k-gantt-toolbar',\n                views: 'k-gantt-views',\n                viewsWrapper: 'k-gantt-views-wrapper',\n                viewsDropdown: 'k-views-dropdown',\n                button: 'k-button k-button-icontext',\n                buttonToggle: 'k-button k-button-icon k-gantt-toggle',\n                iconPlus: 'k-icon k-i-plus',\n                iconPdf: 'k-icon k-i-file-pdf',\n                iconToggle: 'k-icon k-i-layout-1-by-4',\n                viewButtonDefault: 'k-state-default',\n                viewButton: 'k-view',\n                link: 'k-link',\n                pdfButton: 'k-gantt-pdf',\n                appendButton: 'k-gantt-create'\n            }\n        };\n        function selector(uid) {\n            return '[' + kendo.attr('uid') + (uid ? '=\\'' + uid + '\\']' : ']');\n        }\n        function trimOptions(options) {\n            delete options.name;\n            delete options.prefix;\n            delete options.remove;\n            delete options.edit;\n            delete options.add;\n            delete options.navigate;\n            return options;\n        }\n        function focusTable(table, direct) {\n            var wrapper = table.parents('[' + kendo.attr('role') + '=\"gantt\"]');\n            var scrollPositions = [];\n            var parents = scrollableParents(wrapper);\n            table.attr(TABINDEX, 0);\n            if (direct) {\n                parents.each(function (index, parent) {\n                    scrollPositions[index] = $(parent).scrollTop();\n                });\n            }\n            try {\n                table[0].setActive();\n            } catch (e) {\n                table[0].focus();\n            }\n            if (direct) {\n                parents.each(function (index, parent) {\n                    $(parent).scrollTop(scrollPositions[index]);\n                });\n            }\n        }\n        function scrollableParents(element) {\n            return $(element).parentsUntil('body').filter(function (index, element) {\n                var computedStyle = kendo.getComputedStyles(element, ['overflow']);\n                return computedStyle.overflow != 'visible';\n            }).add(window);\n        }\n        var defaultCommands;\n        var Gantt = Widget.extend({\n            init: function (element, options, events) {\n                if (isArray(options)) {\n                    options = { dataSource: options };\n                }\n                defaultCommands = {\n                    append: {\n                        text: 'Add Task',\n                        action: 'add',\n                        className: Gantt.styles.toolbar.appendButton,\n                        iconClass: Gantt.styles.toolbar.iconPlus\n                    },\n                    pdf: {\n                        text: 'Export to PDF',\n                        className: Gantt.styles.toolbar.pdfButton,\n                        iconClass: Gantt.styles.toolbar.iconPdf\n                    }\n                };\n                Widget.fn.init.call(this, element, options);\n                if (events) {\n                    this._events = events;\n                }\n                this._wrapper();\n                this._resources();\n                if (!this.options.views || !this.options.views.length) {\n                    this.options.views = [\n                        'day',\n                        'week',\n                        'month'\n                    ];\n                }\n                this._timeline();\n                this._toolbar();\n                this._footer();\n                this._adjustDimensions();\n                this._preventRefresh = true;\n                this.view(this.timeline._selectedViewName);\n                this._preventRefresh = false;\n                this._dataSource();\n                this._assignments();\n                this._dropDowns();\n                this._list();\n                this._dependencies();\n                this._resizable();\n                this._scrollable();\n                this._dataBind();\n                this._attachEvents();\n                this._createEditor();\n                kendo.notify(this);\n            },\n            events: [\n                'dataBinding',\n                'dataBound',\n                'add',\n                'edit',\n                'remove',\n                'cancel',\n                'save',\n                'change',\n                'navigate',\n                'moveStart',\n                'move',\n                'moveEnd',\n                'resizeStart',\n                'resize',\n                'resizeEnd',\n                'columnHide',\n                'columnReorder',\n                'columnResize',\n                'columnShow',\n                'togglePlannedTasks'\n            ],\n            options: {\n                name: 'Gantt',\n                autoBind: true,\n                navigatable: false,\n                selectable: true,\n                editable: true,\n                resizable: false,\n                columnResizeHandleWidth: defaultIndicatorWidth,\n                columns: [],\n                views: [],\n                dataSource: {},\n                dependencies: {},\n                resources: {},\n                assignments: {},\n                taskTemplate: null,\n                messages: {\n                    save: 'Save',\n                    cancel: 'Cancel',\n                    destroy: 'Delete',\n                    deleteTaskConfirmation: TASK_DELETE_CONFIRM,\n                    deleteDependencyConfirmation: DEPENDENCY_DELETE_CONFIRM,\n                    deleteTaskWindowTitle: 'Delete task',\n                    deleteDependencyWindowTitle: 'Delete dependency',\n                    views: {\n                        day: 'Day',\n                        week: 'Week',\n                        month: 'Month',\n                        year: 'Year',\n                        start: 'Start',\n                        end: 'End'\n                    },\n                    actions: {\n                        append: 'Add Task',\n                        addChild: 'Add Child',\n                        insertBefore: 'Add Above',\n                        insertAfter: 'Add Below',\n                        pdf: 'Export to PDF'\n                    },\n                    editor: {\n                        editorTitle: 'Task',\n                        resourcesEditorTitle: 'Resources',\n                        title: 'Title',\n                        start: 'Start',\n                        end: 'End',\n                        plannedStart: 'Planned Start',\n                        plannedEnd: 'Planned End',\n                        percentComplete: 'Complete',\n                        resources: 'Resources',\n                        assignButton: 'Assign',\n                        resourcesHeader: 'Resources',\n                        unitsHeader: 'Units'\n                    },\n                    plannedTasks: {\n                        switchText: 'Planned Tasks',\n                        offsetTooltipAdvanced: 'Met deadline earlier',\n                        offsetTooltipDelay: 'Delay',\n                        seconds: 'seconds',\n                        minutes: 'minutes',\n                        hours: 'hours',\n                        days: 'days'\n                    }\n                },\n                showWorkHours: true,\n                showWorkDays: true,\n                toolbar: null,\n                workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n                workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n                workWeekStart: 1,\n                workWeekEnd: 5,\n                hourSpan: 1,\n                snap: true,\n                height: 600,\n                listWidth: '30%',\n                rowHeight: null,\n                showPlannedTasks: false\n            },\n            select: function (value) {\n                var list = this.list;\n                if (!value) {\n                    return list.select();\n                }\n                if (typeof value === STRING) {\n                    value = list.content.find(value);\n                }\n                list.select(value);\n                this.list.element.find('table[role=treegrid]').trigger('focus');\n                return;\n            },\n            clearSelection: function () {\n                this.list.clearSelection();\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                if (this.dataSource) {\n                    this.dataSource.unbind('change', this._refreshHandler);\n                    this.dataSource.unbind('progress', this._progressHandler);\n                    this.dataSource.unbind('error', this._errorHandler);\n                }\n                if (this.dependencies) {\n                    this.dependencies.unbind('change', this._dependencyRefreshHandler);\n                    this.dependencies.unbind('error', this._dependencyErrorHandler);\n                }\n                if (this.timeline) {\n                    this.timeline.unbind();\n                    this.timeline.destroy();\n                }\n                if (this.list) {\n                    this.list.unbind();\n                    this.list.destroy();\n                }\n                if (this.footerDropDown) {\n                    this.footerDropDown.destroy();\n                }\n                if (this.headerDropDown) {\n                    this.headerDropDown.destroy();\n                }\n                if (this._editor) {\n                    this._editor.destroy();\n                }\n                if (this._resizeDraggable) {\n                    this._resizeDraggable.destroy();\n                }\n                this.toolbar.off(NS);\n                if (supportsMedia) {\n                    this._mediaQuery.removeListener(this._mediaQueryHandler);\n                    this._mediaQuery = null;\n                }\n                $(window).off('resize' + NS, this._resizeHandler);\n                $(this.wrapper).off(NS);\n                this.toolbar = null;\n                this.footer = null;\n                kendo.destroy(this.element);\n            },\n            setOptions: function (options) {\n                var newOptions = kendo.deepExtend({}, this.options, options);\n                var events = this._events;\n                if (!options.views) {\n                    var selectedView = this.view().name;\n                    newOptions.views = $.map(this.options.views, function (view) {\n                        var isSettings = isPlainObject(view);\n                        var name = isSettings ? typeof view.type !== 'string' ? view.title : view.type : view;\n                        if (selectedView === name) {\n                            if (isSettings) {\n                                view.selected = true;\n                            } else {\n                                view = {\n                                    type: name,\n                                    selected: true\n                                };\n                            }\n                        } else if (isSettings) {\n                            view.selected = false;\n                        }\n                        return view;\n                    });\n                }\n                if (!options.dataSource) {\n                    newOptions.dataSource = this.dataSource;\n                }\n                if (!options.dependencies) {\n                    newOptions.dependencies = this.dependencies;\n                }\n                if (!options.resources) {\n                    newOptions.resources = this.resources;\n                }\n                if (!options.assignments) {\n                    newOptions.assignments = this.assignments;\n                }\n                this.destroy();\n                this.element.empty();\n                this.options = null;\n                this.init(this.element, newOptions, events);\n                Widget.fn._setEvents.call(this, newOptions);\n            },\n            _attachEvents: function () {\n                this._resizeHandler = proxy(this.resize, this, false);\n                $(window).on('resize' + NS, this._resizeHandler);\n                if (supportsMedia && this._mediaQuery.matches === true) {\n                    this._mediaQueryHandler({ matches: true });\n                }\n            },\n            _wrapper: function () {\n                var ganttStyles = Gantt.styles;\n                var splitBarHandleClassName = [\n                    ganttStyles.icon,\n                    ganttStyles.resizeHandle\n                ].join(' ');\n                var options = this.options;\n                var height = options.height;\n                var width = options.width;\n                this.wrapper = this.element.addClass(ganttStyles.wrapper);\n                this.layout = $('<div class=\\'' + ganttStyles.content + '\\' />').appendTo(this.wrapper).append('<div class=\\'' + ganttStyles.listWrapper + '\\'><div></div></div>').append('<div class=\\'' + ganttStyles.splitBarWrapper + '\\'><div class=\\'' + splitBarHandleClassName + '\\'></div></div>').append('<div class=\\'' + ganttStyles.timelineWrapper + '\\'><div></div></div>');\n                if (options.showPlannedTasks) {\n                    this.wrapper.addClass(ganttStyles.plannedTasks);\n                }\n                if (height) {\n                    this.wrapper.css('height', height);\n                }\n                if (width) {\n                    this.wrapper.css('width', width);\n                }\n                if (options.rowHeight) {\n                    this.wrapper.addClass(ganttStyles.rowHeight);\n                }\n                this.treelistWrapper = this.wrapper.find(DOT + ganttStyles.list);\n                this.splitbar = this.wrapper.find(DOT + ganttStyles.splitBar);\n                this.timelineWrapper = this.wrapper.find(DOT + ganttStyles.timeline);\n                this.treelistWrapper.css('width', options.listWidth);\n                this.timelineWrapper.css('width', this.wrapper.width() - this.treelistWrapper.outerWidth() - this.splitbar.outerWidth());\n            },\n            _toolbar: function () {\n                var that = this;\n                var ganttStyles = Gantt.styles;\n                var viewsSelector = DOT + ganttStyles.toolbar.views + ' > button';\n                var viewsDropdownSelector = DOT + ganttStyles.toolbar.viewsDropdown;\n                var pdfSelector = DOT + ganttStyles.toolbar.pdfButton;\n                var toggleSelector = DOT + ganttStyles.buttonToggle;\n                var contentSelector = DOT + ganttStyles.gridContent;\n                var splitbar = that.splitbar;\n                var treelist = that.treelistWrapper;\n                var timeline = that.timelineWrapper;\n                var actions = this.options.toolbar;\n                var toolbar;\n                var views;\n                var toggleButton;\n                var mediaQueryHandler = function (e) {\n                    if (e.matches) {\n                        treelist.addClass('k-hidden');\n                        splitbar.addClass('k-hidden');\n                        treelist.width('100%');\n                    } else {\n                        treelist.removeClass('k-hidden');\n                        splitbar.removeClass('k-hidden');\n                        timeline.removeClass('k-hidden');\n                        treelist.width(treelist.outerWidth());\n                        that.refresh();\n                        timeline.find(contentSelector).scrollTop(that.scrollTop);\n                    }\n                    that._resize();\n                };\n                if (!isFunction(actions)) {\n                    actions = typeof actions === STRING ? actions : this._actions(actions);\n                    actions = proxy(kendo.template(actions), this);\n                }\n                toggleButton = $(TOGGLE_BUTTON_TEMPLATE({ styles: ganttStyles.toolbar }));\n                views = $(HEADER_VIEWS_TEMPLATE({\n                    ns: kendo.ns,\n                    views: this.timeline.views,\n                    styles: ganttStyles.toolbar\n                }));\n                toolbar = $('<div class=\\'' + ganttStyles.toolbar.headerWrapper + '\\'>').append(toggleButton).append(actions({})).append('<span class=\\'k-spacer k-toolbar-spacer\\' />').append(views);\n                if (views.find('button').length > 1) {\n                    views.prepend(VIEWS_DROPDOWN_TEMPLATE({\n                        ns: kendo.ns,\n                        views: this.timeline.views,\n                        styles: ganttStyles.toolbar\n                    }));\n                }\n                if (this.toggeSwitchWrap) {\n                    this.toggeSwitchWrap.insertBefore(views);\n                }\n                this.wrapper.prepend(toolbar);\n                this.toolbar = toolbar;\n                if (supportsMedia) {\n                    this._mediaQueryHandler = proxy(mediaQueryHandler, this);\n                    this._mediaQuery = window.matchMedia('(max-width: 480px)');\n                    this._mediaQuery.addListener(this._mediaQueryHandler);\n                }\n                toolbar.on('change' + NS, viewsDropdownSelector, function () {\n                    var list = that.list;\n                    var name = $(this).val();\n                    if (list.editable && list.editable.trigger('validate')) {\n                        return;\n                    }\n                    if (!that.trigger('navigate', { view: name })) {\n                        that.view(name);\n                    }\n                    that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused);\n                }).on(CLICK + NS, viewsSelector, function (e) {\n                    e.preventDefault();\n                    var list = that.list;\n                    var name = $(this).attr(kendo.attr('name'));\n                    if (list.editor && !list.editor.end()) {\n                        return;\n                    }\n                    if (!that.trigger('navigate', { view: name })) {\n                        that.view(name);\n                    }\n                    that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused);\n                }).on('keydown' + NS, viewsSelector, function (e) {\n                    var views = $(DOT + ganttStyles.toolbar.views).children(':not(.k-current-view)');\n                    var focusedViewIndex = views.index(that._focusedView && that._focusedView[0] || views.closest(DOT + ganttStyles.selected)[0]);\n                    if (e.keyCode === keys.RIGHT) {\n                        $(that.toolbar.find(DOT + ganttStyles.focused)).removeClass(ganttStyles.focused);\n                        that._focusedView = focusedViewIndex + 1 === views.length ? $(views[0]) : $(views[focusedViewIndex + 1]);\n                        that._focusedView.trigger('focus').addClass(ganttStyles.focused);\n                        e.preventDefault();\n                    } else if (e.keyCode === keys.LEFT) {\n                        $(that.toolbar.find(DOT + ganttStyles.focused)).removeClass(ganttStyles.focused);\n                        that._focusedView = focusedViewIndex === 0 ? $(views[views.length - 1]) : $(views[focusedViewIndex - 1]);\n                        that._focusedView.trigger('focus').addClass(ganttStyles.focused);\n                        e.preventDefault();\n                    } else if ((e.keyCode === keys.ENTER || e.keyCode === keys.SPACEBAR) && that._focusedView) {\n                        that.view(that._focusedView.text().toLowerCase());\n                        e.preventDefault();\n                    } else if (e.keyCode >= 49 && e.keyCode <= 57) {\n                        that.view(that.timeline._viewByIndex(e.keyCode - 49));\n                    }\n                }).on(CLICK + NS, pdfSelector, function (e) {\n                    e.preventDefault();\n                    that.saveAsPDF();\n                }).on(CLICK + NS, toggleSelector, function (e) {\n                    e.preventDefault();\n                    if (treelist.is(':visible')) {\n                        treelist.addClass('k-hidden');\n                        timeline.removeClass('k-hidden');\n                        that.refresh();\n                        timeline.find(contentSelector).scrollTop(that.scrollTop);\n                    } else {\n                        treelist.removeClass('k-hidden');\n                        timeline.addClass('k-hidden');\n                        treelist.find(contentSelector).scrollTop(that.scrollTop);\n                    }\n                    that._resize();\n                });\n                this.wrapper.on('focusout' + NS, function (e) {\n                    if (!$(e.relatedTarget).closest(DOT + ganttStyles.toolbar.toolbar).length) {\n                        that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused);\n                    }\n                    if (!$(e.relatedTarget).closest(DOT + ganttStyles.toolbar.views).length) {\n                        that.toolbar.find(DOT + ganttStyles.toolbar.views).removeClass(ganttStyles.toolbar.expanded);\n                    }\n                });\n            },\n            _actions: function () {\n                var options = this.options;\n                var editable = options.editable;\n                var actions = options.toolbar;\n                var html = '';\n                var action;\n                if (!isArray(actions)) {\n                    if (editable && editable.create !== false) {\n                        actions = ['append'];\n                    } else {\n                        return html;\n                    }\n                }\n                for (var i = 0, length = actions.length; i < length; i++) {\n                    action = actions[i];\n                    if (action === 'plannedTasks' || action.name === 'plannedTasks') {\n                        this._createPlannedTasksSwitch();\n                        continue;\n                    }\n                    html += this._createButton(action);\n                }\n                return html;\n            },\n            _footer: function () {\n                var editable = this.options.editable;\n                if (!editable || editable.create === false) {\n                    return;\n                }\n                var ganttStyles = Gantt.styles.toolbar;\n                var messages = this.options.messages.actions;\n                var button = $(kendo.template(BUTTON_TEMPLATE)(extend(true, { styles: ganttStyles }, defaultCommands.append, { text: messages.append })));\n                var footer = $('<div class=\\'' + ganttStyles.footerWrapper + '\\'>').append(button);\n                this.wrapper.append(footer);\n                this.footer = footer;\n            },\n            _createButton: function (command) {\n                var template = command.template || BUTTON_TEMPLATE;\n                var messages = this.options.messages.actions;\n                var commandName = typeof command === STRING ? command : command.name || command.text;\n                var className = defaultCommands[commandName] ? defaultCommands[commandName].className : 'k-gantt-' + (commandName || '').replace(/\\s/g, '');\n                var options = {\n                    iconClass: '',\n                    action: '',\n                    text: commandName,\n                    className: className,\n                    styles: Gantt.styles.toolbar\n                };\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error('Custom commands should have name specified');\n                }\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n                if (isPlainObject(command)) {\n                    if (command.className && inArray(options.className, command.className.split(' ')) < 0) {\n                        command.className += ' ' + options.className;\n                    }\n                    options = extend(true, options, command);\n                }\n                return kendo.template(template)(options);\n            },\n            _adjustDimensions: function () {\n                var element = this.element;\n                var toolbarHeight = outerHeight(this.toolbar);\n                var footerHeight = this.footer ? outerHeight(this.footer) : 0;\n                var totalHeight = element.height();\n                var totalWidth = element.width();\n                var splitBarWidth = this.splitbar.is(':visible') ? outerWidth(this.splitbar) : 0;\n                var treeListWidth = this.treelistWrapper.is(':visible') ? outerWidth(this.treelistWrapper) : 0;\n                var timelineWidth = totalWidth - (treeListWidth + splitBarWidth);\n                this.layout.children().height(totalHeight - (toolbarHeight + footerHeight));\n                this.timelineWrapper.width(timelineWidth);\n                if (totalWidth < treeListWidth + splitBarWidth) {\n                    this.treelistWrapper.width(totalWidth - splitBarWidth);\n                }\n            },\n            _scrollTo: function (value) {\n                var view = this.timeline.view();\n                var list = this.list;\n                var attr = kendo.attr('uid');\n                var id = typeof value === 'string' ? value : value.closest('tr' + selector()).attr(attr);\n                var action;\n                var scrollTarget;\n                var scrollIntoView = function () {\n                    if (scrollTarget.length !== 0) {\n                        action();\n                    }\n                };\n                if (view.content.is(':visible')) {\n                    scrollTarget = view.content.find(selector(id));\n                    action = function () {\n                        view._scrollTo(scrollTarget);\n                    };\n                } else {\n                    scrollTarget = list.element.find(selector(id));\n                    action = function () {\n                        scrollTarget.get(0).scrollIntoView();\n                    };\n                }\n                scrollIntoView();\n            },\n            _dropDowns: function () {\n                var that = this;\n                var actionsSelector = DOT + Gantt.styles.toolbar.appendButton;\n                var actionMessages = this.options.messages.actions;\n                var timeline = this.timeline;\n                var editable = this.options.editable;\n                var handler = function (e) {\n                    var type = e.type;\n                    var orderId;\n                    var dataSource = that.dataSource;\n                    var task = dataSource._createNewModel({});\n                    var selected = that.dataItem(that.select());\n                    var parent = dataSource.taskParent(selected);\n                    var firstSlot = timeline.view()._timeSlots()[0];\n                    var target = type === 'add' ? selected : parent;\n                    var editable = that.list.editor;\n                    if (editable && editable.trigger('validate')) {\n                        return;\n                    }\n                    task.set('title', 'New task');\n                    if (target) {\n                        task.set('parentId', target.get('id'));\n                        task.set('start', target.get('start'));\n                        task.set('end', target.get('end'));\n                        task.set('plannedStart', target.get('plannedStart'));\n                        task.set('plannedEnd', target.get('plannedEnd'));\n                    } else {\n                        task.set('start', firstSlot.start);\n                        task.set('end', firstSlot.end);\n                    }\n                    if (type !== 'add') {\n                        orderId = selected.get('orderId');\n                        orderId = type === 'insert-before' ? orderId : orderId + 1;\n                    }\n                    that._createTask(task, orderId);\n                };\n                if (!editable || editable.create === false) {\n                    return;\n                }\n                this.footerDropDown = new kendo.gantt.TaskDropDown(this.footer.children(actionsSelector).eq(0), {\n                    messages: { actions: actionMessages },\n                    direction: 'up',\n                    animation: { open: { effects: 'slideIn:up' } },\n                    navigatable: that.options.navigatable\n                });\n                this.headerDropDown = new kendo.gantt.TaskDropDown(this.toolbar.children(actionsSelector).eq(0), {\n                    messages: { actions: actionMessages },\n                    navigatable: that.options.navigatable\n                });\n                this.footerDropDown.bind('command', handler);\n                this.headerDropDown.bind('command', handler);\n            },\n            _getListEditable: function () {\n                var editable = false, options = this.options;\n                if (options.editable !== false) {\n                    editable = 'incell';\n                    if (options.editable && options.editable.update === false) {\n                        editable = false;\n                    } else {\n                        if (!options.editable || options.editable.reorder !== false) {\n                            editable = {\n                                mode: 'incell',\n                                move: { reorderable: true }\n                            };\n                        }\n                    }\n                }\n                return editable;\n            },\n            _getListOptions: function () {\n                var options = this.options, editable = this._getListEditable(), listWrapper = this.wrapper.find(DOT + ganttStyles.list), ganttListOptions = {\n                        columns: options.columns || [],\n                        dataSource: this.dataSource,\n                        selectable: options.selectable,\n                        reorderable: options.reorderable,\n                        editable: editable,\n                        resizable: options.resizable,\n                        filterable: options.filterable,\n                        columnMenu: options.columnMenu,\n                        columnResizeHandleWidth: this.options.columnResizeHandleWidth,\n                        listWidth: outerWidth(listWrapper),\n                        resourcesField: this.resources.field,\n                        rowHeight: this.options.rowHeight\n                    };\n                return ganttListOptions;\n            },\n            _attachResourceEditor: function (columns) {\n                var column;\n                for (var i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    if (column.field === this.resources.field && typeof column.editor !== 'function') {\n                        column.editor = proxy(this._createResourceEditor, this);\n                    }\n                }\n            },\n            _attachListEvents: function () {\n                var that = this, navigatable = that.options.navigatable, toggleButtons = this.wrapper.find(DOT + ganttStyles.toolbar.toolbar + ' ' + DOT + ganttStyles.toolbar.appendButton), restoreFocus = function () {\n                        var element;\n                        if (navigatable && that._cachedCurrent) {\n                            element = that.list.content.find('tr').eq(that._cachedCurrent.rowIndex).find('td').eq(that._cachedCurrent.columnIndex);\n                            that._current(element);\n                            focusTable(that.list.content.find('table'), true);\n                        }\n                        delete that._cachedCurrent;\n                    };\n                that.list.bind('columnShow', function (e) {\n                    that.trigger('columnShow', { column: e.column });\n                }).bind('columnHide', function (e) {\n                    that.trigger('columnHide', { column: e.column });\n                }).bind('columnReorder', function (e) {\n                    that.trigger('columnReorder', {\n                        column: e.column,\n                        oldIndex: e.oldIndex,\n                        newIndex: e.newIndex\n                    });\n                }).bind('columnResize', function (e) {\n                    that.trigger('columnResize', {\n                        column: e.column,\n                        oldWidth: e.oldWidth,\n                        newWidth: e.newWidth\n                    });\n                }).bind('render', function () {\n                    that._navigatable();\n                }, true).bind('beforeEdit', function (e) {\n                    that._cachedCurrent = {\n                        rowIndex: e.container.closest('tr').index(),\n                        columnIndex: e.container.index()\n                    };\n                    if (that.trigger('edit', {\n                            task: e.model,\n                            container: e.container\n                        })) {\n                        e.preventDefault();\n                    }\n                }).bind('cancel', function (e) {\n                    if (that.trigger('cancel', {\n                            task: e.model,\n                            container: e.cell\n                        })) {\n                        e.preventDefault();\n                        return;\n                    }\n                    that._preventItemChange = true;\n                    that.list.closeCell(true);\n                    restoreFocus();\n                }).bind('save', function (e) {\n                    var updatedValues = e.values;\n                    that._preventRefresh = true;\n                    if (that.updateDuration === null || that.updateDuration === undefined) {\n                        that.updateDuration = e.model.duration();\n                    }\n                    if (that.updatePlannedDuration === null || that.updatePlannedDuration === undefined) {\n                        that.updatePlannedDuration = e.model.plannedDuration();\n                    }\n                    if (updatedValues.hasOwnProperty('start')) {\n                        that.previousStart = e.model.get('start');\n                        updatedValues.end = new Date(updatedValues.start.getTime() + that.updateDuration);\n                    }\n                    if (updatedValues.hasOwnProperty('plannedStart') && updatedValues.plannedStart) {\n                        that.previousPlannedStart = e.model.get('plannedStart');\n                        updatedValues.plannedEnd = new Date(updatedValues.plannedStart.getTime() + that.updatePlannedDuration);\n                    }\n                    that.updatedValues = updatedValues;\n                }).bind('itemChange', function (e) {\n                    var updateInfo = that.updatedValues;\n                    var task = e.data;\n                    var resourcesField = that.resources.field;\n                    if (that._preventItemChange) {\n                        that._preventItemChange = false;\n                        return;\n                    }\n                    if (that.previousStart) {\n                        task.set('start', that.previousStart);\n                        that.previousStart = null;\n                    }\n                    if (that.previousPlannedStart) {\n                        task.set('plannedStart', that.previousPlannedStart);\n                        that.previousPlannedStart = null;\n                    }\n                    if (!that.trigger('save', {\n                            task: task,\n                            values: updateInfo\n                        })) {\n                        if (updateInfo) {\n                            that._preventRefresh = true;\n                            that.dataSource.update(task, updateInfo);\n                            if (updateInfo[resourcesField]) {\n                                that._updateAssignments(task.get('id'), updateInfo[resourcesField]);\n                            }\n                        }\n                        that._preventRefresh = false;\n                        that._requestStart();\n                        that.dataSource.sync().then(function () {\n                            restoreFocus();\n                        });\n                    } else if (that.dataSource.hasChanges()) {\n                        that.dataSource.cancelChanges();\n                        that._preventRefresh = false;\n                        that.refresh();\n                    }\n                    that.updatedValues = null;\n                    that.updateDuration = null;\n                }).bind('change', function () {\n                    that.trigger('change');\n                    var selection = that.list.select();\n                    if (selection.length) {\n                        toggleButtons.removeAttr('data-action', 'add');\n                        that.timeline.select('[data-uid=\\'' + selection.attr('data-uid') + '\\']');\n                    } else {\n                        toggleButtons.attr('data-action', 'add');\n                        that.timeline.clearSelection();\n                    }\n                }).bind('collapse', function (e) {\n                    e.preventDefault();\n                    var row = that.list.element.find('tr[data-uid=\\'' + e.model.uid + '\\']');\n                    e.model.set('expanded', false);\n                    that._cachedCurrent = {\n                        rowIndex: row.index(),\n                        columnIndex: row.find('.k-state-focused').index()\n                    };\n                    restoreFocus();\n                }).bind('expand', function (e) {\n                    e.preventDefault();\n                    var row = that.list.element.find('tr[data-uid=\\'' + e.model.uid + '\\']');\n                    e.model.set('expanded', true);\n                    that._cachedCurrent = {\n                        rowIndex: row.index(),\n                        columnIndex: row.find('.k-state-focused').index()\n                    };\n                    restoreFocus();\n                }).bind('dragend', function (e) {\n                    var dataSource = that.dataSource, task, updateInfo;\n                    if (e.position === 'over') {\n                        updateInfo = { parentId: e.source.parentId };\n                        dataSource.cancelChanges();\n                        task = dataSource.get(e.source.id);\n                        if (!that.trigger('save', {\n                                task: task,\n                                values: updateInfo\n                            })) {\n                            dataSource.update(task, updateInfo);\n                        }\n                    }\n                    dataSource.sync();\n                }).bind('dataBound', function () {\n                    if (that.dataSource.sort().length === 0) {\n                        that.dataSource.sort([{\n                                field: 'orderId',\n                                dir: 'asc'\n                            }]);\n                    }\n                }).bind('reorder', function (e) {\n                    that._updateTask(e.task, e.updateInfo);\n                    restoreFocus();\n                });\n            },\n            _list: function () {\n                var ganttStyles = Gantt.styles, listWrapper = this.wrapper.find(DOT + ganttStyles.list), listElement = listWrapper.find('> div'), listOptions = this._getListOptions();\n                this._attachResourceEditor(listOptions.columns);\n                this.list = new kendo.ui.GanttList(listElement, listOptions);\n                this._attachListEvents();\n            },\n            _timeline: function () {\n                var that = this;\n                var ganttStyles = Gantt.styles;\n                var options = trimOptions(extend(true, { resourcesField: this.resources.field }, this.options));\n                var element = this.wrapper.find(DOT + ganttStyles.timeline + ' > div');\n                this.timeline = new kendo.ui.GanttTimeline(element, options);\n                this.timeline.bind('navigate', function (e) {\n                    var viewName = e.view.replace(/\\./g, '\\\\.').toLowerCase();\n                    that.toolbar.find(DOT + ganttStyles.toolbar.views + ' > button').removeClass(ganttStyles.selected).end().find(DOT + ganttStyles.toolbar.viewButton + '-' + viewName).addClass(ganttStyles.selected);\n                    that.toolbar.find(DOT + ganttStyles.toolbar.viewsDropdown).val(e.view);\n                    that.refresh();\n                }).bind('moveStart', function (e) {\n                    var editable = that.list.editor;\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                        return;\n                    }\n                    if (that.trigger('moveStart', { task: e.task })) {\n                        e.preventDefault();\n                    }\n                }).bind('move', function (e) {\n                    var task = e.task;\n                    var start = e.start;\n                    var end = new Date(start.getTime() + task.duration());\n                    if (that.trigger('move', {\n                            task: task,\n                            start: start,\n                            end: end\n                        })) {\n                        e.preventDefault();\n                    }\n                }).bind('moveEnd', function (e) {\n                    var task = e.task;\n                    var start = e.start;\n                    var end = new Date(start.getTime() + task.duration());\n                    if (!that.trigger('moveEnd', {\n                            task: task,\n                            start: start,\n                            end: end\n                        })) {\n                        that._updateTask(that.dataSource.getByUid(task.uid), {\n                            start: start,\n                            end: end\n                        });\n                    }\n                }).bind('resizeStart', function (e) {\n                    var editable = that.list.editor;\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                        return;\n                    }\n                    if (that.trigger('resizeStart', { task: e.task })) {\n                        e.preventDefault();\n                    }\n                }).bind('resize', function (e) {\n                    if (that.trigger('resize', {\n                            task: e.task,\n                            start: e.start,\n                            end: e.end\n                        })) {\n                        e.preventDefault();\n                    }\n                }).bind('resizeEnd', function (e) {\n                    var task = e.task;\n                    var updateInfo = {};\n                    if (e.resizeStart) {\n                        updateInfo.start = e.start;\n                    } else {\n                        updateInfo.end = e.end;\n                    }\n                    if (!that.trigger('resizeEnd', {\n                            task: task,\n                            start: e.start,\n                            end: e.end\n                        })) {\n                        that._updateTask(that.dataSource.getByUid(task.uid), updateInfo);\n                    }\n                }).bind('percentResizeStart', function (e) {\n                    var editable = that.list.editor;\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                    }\n                }).bind('percentResizeEnd', function (e) {\n                    that._updateTask(that.dataSource.getByUid(e.task.uid), { percentComplete: e.percentComplete });\n                }).bind('dependencyDragStart', function (e) {\n                    var editable = that.list.editor;\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                    }\n                }).bind('dependencyDragEnd', function (e) {\n                    var dependency = that.dependencies._createNewModel({\n                        type: e.type,\n                        predecessorId: e.predecessor.id,\n                        successorId: e.successor.id\n                    });\n                    that._createDependency(dependency);\n                }).bind('select', function (e) {\n                    var editable = that.list.editor;\n                    if (editable) {\n                        editable.end();\n                    }\n                    that.select('[data-uid=\\'' + e.uid + '\\']');\n                }).bind('editTask', function (e) {\n                    var editable = that.list.editor;\n                    if (editable && !editable.end()) {\n                        return;\n                    }\n                    that.editTask(e.uid);\n                }).bind('clear', function () {\n                    that.clearSelection();\n                }).bind('removeTask', function (e) {\n                    var editable = that.list.editor;\n                    if (editable && !editable.end()) {\n                        return;\n                    }\n                    that.removeTask(that.dataSource.getByUid(e.uid));\n                }).bind('removeDependency', function (e) {\n                    var editable = that.list.editor;\n                    if (editable && !editable.end()) {\n                        return;\n                    }\n                    that.removeDependency(that.dependencies.getByUid(e.uid));\n                });\n            },\n            _dataSource: function () {\n                var options = this.options;\n                var dataSource = options.dataSource;\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n                if (this.dataSource && this._refreshHandler) {\n                    this.dataSource.unbind('change', this._refreshHandler).unbind('progress', this._progressHandler).unbind('error', this._errorHandler);\n                } else {\n                    this._refreshHandler = proxy(this.refresh, this);\n                    this._progressHandler = proxy(this._requestStart, this);\n                    this._errorHandler = proxy(this._error, this);\n                }\n                this.dataSource = kendo.data.GanttDataSource.create(dataSource).bind('change', this._refreshHandler).bind('progress', this._progressHandler).bind('error', this._errorHandler);\n            },\n            _dependencies: function () {\n                var dependencies = this.options.dependencies || {};\n                var dataSource = isArray(dependencies) ? { data: dependencies } : dependencies;\n                if (this.dependencies && this._dependencyRefreshHandler) {\n                    this.dependencies.unbind('change', this._dependencyRefreshHandler).unbind('error', this._dependencyErrorHandler);\n                } else {\n                    this._dependencyRefreshHandler = proxy(this.refreshDependencies, this);\n                    this._dependencyErrorHandler = proxy(this._error, this);\n                }\n                this.dependencies = kendo.data.GanttDependencyDataSource.create(dataSource).bind('change', this._dependencyRefreshHandler).bind('error', this._dependencyErrorHandler);\n            },\n            _resources: function () {\n                var resources = this.options.resources;\n                var dataSource = resources.dataSource || {};\n                this.resources = {\n                    field: 'resources',\n                    dataTextField: 'name',\n                    dataColorField: 'color',\n                    dataFormatField: 'format'\n                };\n                extend(this.resources, resources);\n                this.resources.dataSource = kendo.data.DataSource.create(dataSource);\n            },\n            _assignments: function () {\n                var assignments = this.options.assignments;\n                var dataSource = assignments.dataSource || {};\n                if (this.assignments) {\n                    this.assignments.dataSource.unbind('change', this._assignmentsRefreshHandler);\n                } else {\n                    this._assignmentsRefreshHandler = proxy(this.refresh, this);\n                }\n                this.assignments = {\n                    dataTaskIdField: 'taskId',\n                    dataResourceIdField: 'resourceId',\n                    dataValueField: 'value'\n                };\n                extend(this.assignments, assignments);\n                this.assignments.dataSource = kendo.data.DataSource.create(dataSource);\n                this.assignments.dataSource.bind('change', this._assignmentsRefreshHandler);\n            },\n            _createEditor: function () {\n                var that = this;\n                var editor = this._editor = new kendo.gantt.PopupEditor(this.wrapper, extend({}, this.options, {\n                    target: this,\n                    resources: {\n                        field: this.resources.field,\n                        editor: proxy(this._createResourceEditor, this)\n                    },\n                    createButton: proxy(this._createPopupButton, this)\n                }));\n                editor.bind('cancel', function (e) {\n                    var task = that.dataSource.getByUid(e.model.uid);\n                    if (that.trigger('cancel', {\n                            container: e.container,\n                            task: task\n                        })) {\n                        e.preventDefault();\n                        return;\n                    }\n                    that.cancelTask();\n                }).bind('edit', function (e) {\n                    var task = that.dataSource.getByUid(e.model.uid);\n                    if (that.trigger('edit', {\n                            container: e.container,\n                            task: task\n                        })) {\n                        e.preventDefault();\n                    }\n                }).bind('save', function (e) {\n                    var task = that.dataSource.getByUid(e.model.uid);\n                    that.saveTask(task, e.updateInfo);\n                }).bind('remove', function (e) {\n                    that.removeTask(e.model.uid);\n                }).bind('close', that._onDialogClose);\n            },\n            _onDialogClose: function () {\n            },\n            _createResourceEditor: function (container, options) {\n                var that = this;\n                var model = options instanceof ObservableObject ? options : options.model;\n                var id = model.get('id');\n                var messages = this.options.messages;\n                var resourcesField = this.resources.field;\n                var unitsValidation = { step: 0.01 };\n                var assignmentsModel = this.assignments.dataSource.options.schema.model;\n                if (assignmentsModel && assignmentsModel.fields.Units && assignmentsModel.fields.Units.validation) {\n                    extend(true, unitsValidation, assignmentsModel.fields.Units.validation);\n                }\n                var editor = this._resourceEditor = new kendo.gantt.ResourceEditor(container, {\n                    resourcesField: resourcesField,\n                    unitsValidation: unitsValidation,\n                    data: this._wrapResourceData(id),\n                    model: model,\n                    messages: extend({}, messages.editor),\n                    buttons: [\n                        {\n                            name: 'update',\n                            text: messages.save,\n                            className: Gantt.styles.primary\n                        },\n                        {\n                            name: 'cancel',\n                            text: messages.cancel\n                        }\n                    ],\n                    createButton: proxy(this._createPopupButton, this),\n                    save: function (e) {\n                        that._updateAssignments(e.model.get('id'), e.model.get(resourcesField));\n                    }\n                });\n                editor.open();\n            },\n            _createPopupButton: function (command) {\n                var commandName = command.name || command.text;\n                var options = {\n                    className: Gantt.styles.popup.button + ' k-gantt-' + (commandName || '').replace(/\\s/g, ''),\n                    text: commandName,\n                    attr: ''\n                };\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error('Custom commands should have name specified');\n                }\n                if (isPlainObject(command)) {\n                    if (command.className) {\n                        command.className += ' ' + options.className;\n                    }\n                    options = extend(true, options, command);\n                }\n                return kendo.template(COMMAND_BUTTON_TEMPLATE)(options);\n            },\n            view: function (type) {\n                return this.timeline.view(type);\n            },\n            range: function (range) {\n                var dataSource = this.dataSource;\n                var view = this.view();\n                var timeline = this.timeline;\n                if (range) {\n                    view.options.range = {\n                        start: range.start,\n                        end: range.end\n                    };\n                    timeline._render(dataSource.taskTree());\n                    timeline._renderDependencies(this.dependencies.view());\n                }\n                return {\n                    start: view.start,\n                    end: view.end\n                };\n            },\n            date: function (date) {\n                var view = this.view();\n                if (date) {\n                    view.options.date = date;\n                    view._scrollToDate(date);\n                }\n                return view.options.date;\n            },\n            dataItem: function (value) {\n                if (!value) {\n                    return null;\n                }\n                var list = this.list;\n                var element = list.element.find(value);\n                return list._modelFromElement(element);\n            },\n            setDataSource: function (dataSource) {\n                this.options.dataSource = dataSource;\n                this._dataSource();\n                this.list.setDataSource(this.dataSource);\n                if (this.options.autoBind) {\n                    dataSource.fetch();\n                }\n            },\n            setDependenciesDataSource: function (dependencies) {\n                this.options.dependencies = dependencies;\n                this._dependencies();\n                if (this.options.autoBind) {\n                    dependencies.fetch();\n                }\n            },\n            items: function () {\n                return this.wrapper.children('.k-task');\n            },\n            _updateAssignments: function (id, resources) {\n                var dataSource = this.assignments.dataSource;\n                var taskId = this.assignments.dataTaskIdField;\n                var resourceId = this.assignments.dataResourceIdField;\n                var hasMatch = false;\n                var assignments = new Query(dataSource.view()).filter({\n                    field: taskId,\n                    operator: 'eq',\n                    value: id\n                }).toArray();\n                var assignment;\n                var resource;\n                var value;\n                while (assignments.length) {\n                    assignment = assignments[0];\n                    for (var i = 0, length = resources.length; i < length; i++) {\n                        resource = resources[i];\n                        if (assignment.get(resourceId) === resource.get('id')) {\n                            value = resources[i].get('value');\n                            this._updateAssignment(assignment, value);\n                            resources.splice(i, 1);\n                            hasMatch = true;\n                            break;\n                        }\n                    }\n                    if (!hasMatch) {\n                        this._removeAssignment(assignment);\n                    }\n                    hasMatch = false;\n                    assignments.shift();\n                }\n                for (var j = 0, newLength = resources.length; j < newLength; j++) {\n                    resource = resources[j];\n                    this._createAssignment(resource, id);\n                }\n                dataSource.sync();\n            },\n            cancelTask: function () {\n                var editor = this._editor;\n                var container = editor.container;\n                if (container) {\n                    editor.close();\n                }\n            },\n            editTask: function (uid) {\n                var task = typeof uid === 'string' ? this.dataSource.getByUid(uid) : uid;\n                if (!task) {\n                    return;\n                }\n                var taskCopy = this.dataSource._createNewModel(task.toJSON());\n                taskCopy.uid = task.uid;\n                this.cancelTask();\n                this._editTask(taskCopy);\n            },\n            _editTask: function (task) {\n                this._editor.editTask(task, this.options.editable.plannedTasks);\n            },\n            saveTask: function (task, updateInfo) {\n                var editor = this._editor;\n                var container = editor.container;\n                var editable = editor.editable;\n                if (container && editable && editable.end()) {\n                    this._updateTask(task, updateInfo);\n                }\n            },\n            _updateTask: function (task, updateInfo) {\n                var that = this;\n                var resourcesField = that.resources.field;\n                if (!that.trigger('save', {\n                        task: task,\n                        values: updateInfo\n                    })) {\n                    if (updateInfo) {\n                        that._preventRefresh = true;\n                        that.dataSource.update(task, updateInfo);\n                        if (updateInfo[resourcesField]) {\n                            that._updateAssignments(task.get('id'), updateInfo[resourcesField]);\n                        }\n                    }\n                    that._syncDataSource();\n                } else if (that.dataSource.hasChanges()) {\n                    that.dataSource.cancelChanges();\n                    that._preventRefresh = false;\n                    that.refresh();\n                }\n            },\n            _updateAssignment: function (assignment, value) {\n                var resourceValueField = this.assignments.dataValueField;\n                assignment.set(resourceValueField, value);\n            },\n            removeTask: function (uid) {\n                var that = this;\n                var task = typeof uid === 'string' ? this.dataSource.getByUid(uid) : uid;\n                if (!task) {\n                    return;\n                }\n                this._taskConfirm(function (cancel) {\n                    if (!cancel) {\n                        that._removeTask(task);\n                    }\n                }, task);\n            },\n            _createTask: function (task, index) {\n                if (!this.trigger('add', {\n                        task: task,\n                        dependency: null\n                    })) {\n                    var dataSource = this.dataSource;\n                    this._preventRefresh = true;\n                    if (index === undefined) {\n                        dataSource.add(task);\n                    } else {\n                        dataSource.insert(index, task);\n                    }\n                    this._scrollToUid = task.uid;\n                    this._syncDataSource();\n                }\n            },\n            _createDependency: function (dependency) {\n                if (!this.trigger('add', {\n                        task: null,\n                        dependency: dependency\n                    })) {\n                    this._preventDependencyRefresh = true;\n                    this.dependencies.add(dependency);\n                    this._preventDependencyRefresh = false;\n                    this.dependencies.sync();\n                }\n            },\n            _createAssignment: function (resource, id) {\n                var assignments = this.assignments;\n                var dataSource = assignments.dataSource;\n                var taskId = assignments.dataTaskIdField;\n                var resourceId = assignments.dataResourceIdField;\n                var resourceValue = assignments.dataValueField;\n                var assignment = dataSource._createNewModel();\n                assignment[taskId] = id;\n                assignment[resourceId] = resource.get('id');\n                assignment[resourceValue] = resource.get('value');\n                dataSource.add(assignment);\n            },\n            removeDependency: function (uid) {\n                var that = this;\n                var dependency = typeof uid === 'string' ? this.dependencies.getByUid(uid) : uid;\n                if (!dependency) {\n                    return;\n                }\n                this._dependencyConfirm(function (cancel) {\n                    if (!cancel) {\n                        that._removeDependency(dependency);\n                    }\n                }, dependency);\n            },\n            _removeTaskDependencies: function (task, dependencies) {\n                this._preventDependencyRefresh = true;\n                for (var i = 0, length = dependencies.length; i < length; i++) {\n                    this.dependencies.remove(dependencies[i]);\n                }\n                this._preventDependencyRefresh = false;\n                this.dependencies.sync();\n            },\n            _removeTaskAssignments: function (task) {\n                var dataSource = this.assignments.dataSource;\n                var assignments = dataSource.view();\n                var filter = {\n                    field: this.assignments.dataTaskIdField,\n                    operator: 'eq',\n                    value: task.get('id')\n                };\n                assignments = new Query(assignments).filter(filter).toArray();\n                this._preventRefresh = true;\n                for (var i = 0, length = assignments.length; i < length; i++) {\n                    dataSource.remove(assignments[i]);\n                }\n                this._preventRefresh = false;\n                dataSource.sync();\n            },\n            _removeTask: function (task) {\n                var dependencies = this.dependencies.dependencies(task.id);\n                if (!this.trigger('remove', {\n                        task: task,\n                        dependencies: dependencies\n                    })) {\n                    this._removeTaskDependencies(task, dependencies);\n                    this._removeTaskAssignments(task);\n                    this._preventRefresh = true;\n                    if (this.dataSource.remove(task)) {\n                        this._syncDataSource();\n                    }\n                    this._preventRefresh = false;\n                }\n            },\n            _removeDependency: function (dependency) {\n                if (!this.trigger('remove', {\n                        task: null,\n                        dependencies: [dependency]\n                    })) {\n                    if (this.dependencies.remove(dependency)) {\n                        this.dependencies.sync();\n                    }\n                }\n            },\n            _removeAssignment: function (assignment) {\n                this.assignments.dataSource.remove(assignment);\n            },\n            _taskConfirm: function (callback, task) {\n                var messages = this.options.messages;\n                this._confirm(callback, {\n                    model: task,\n                    text: messages.deleteTaskConfirmation,\n                    title: messages.deleteTaskWindowTitle\n                });\n            },\n            _dependencyConfirm: function (callback, dependency) {\n                var messages = this.options.messages;\n                this._confirm(callback, {\n                    model: dependency,\n                    text: messages.deleteDependencyConfirmation,\n                    title: messages.deleteDependencyWindowTitle\n                });\n            },\n            _confirm: function (callback, options) {\n                var editable = this.options.editable;\n                var messages;\n                var buttons;\n                if (editable === true || editable.confirmation !== false) {\n                    messages = this.options.messages;\n                    buttons = [\n                        {\n                            name: 'delete',\n                            text: messages.destroy,\n                            className: Gantt.styles.primary,\n                            click: function () {\n                                callback();\n                            }\n                        },\n                        {\n                            name: 'cancel',\n                            text: messages.cancel,\n                            click: function () {\n                                callback(true);\n                            }\n                        }\n                    ];\n                    this.showDialog(extend(true, {}, options, { buttons: buttons }));\n                } else {\n                    callback();\n                }\n            },\n            showDialog: function (options) {\n                this._editor.showDialog(options);\n            },\n            refresh: function () {\n                if (this._preventRefresh || !this.list || this.list.editor) {\n                    return;\n                }\n                this._progress(false);\n                var dataSource = this.dataSource;\n                var taskTree = dataSource.taskTree();\n                var scrollToUid = this._scrollToUid;\n                var current;\n                var cachedUid;\n                var cachedIndex = -1;\n                if (this.current) {\n                    cachedUid = this.current.closest('tr').attr(kendo.attr('uid'));\n                    cachedIndex = this.current.index();\n                }\n                if (this.trigger('dataBinding')) {\n                    return;\n                }\n                if (this.resources.dataSource.data().length !== 0) {\n                    this._assignResources(taskTree);\n                }\n                if (this._editor) {\n                    this._editor.close();\n                }\n                this.clearSelection();\n                this.list._renderTree(taskTree);\n                this.timeline._render(taskTree);\n                this.timeline._renderDependencies(this.dependencies.view());\n                if (scrollToUid) {\n                    this._scrollTo(scrollToUid);\n                    this.select(selector(scrollToUid));\n                }\n                if ((scrollToUid || cachedUid) && cachedIndex >= 0) {\n                    current = this.list.element.find('tr' + selector(scrollToUid || cachedUid) + ' > td').eq(cachedIndex);\n                    this._current(current);\n                }\n                this._scrollToUid = null;\n                this.trigger('dataBound');\n            },\n            refreshDependencies: function () {\n                if (this._preventDependencyRefresh) {\n                    return;\n                }\n                if (this.trigger('dataBinding')) {\n                    return;\n                }\n                this.timeline._renderDependencies(this.dependencies.view());\n                this.trigger('dataBound');\n            },\n            _assignResources: function (taskTree) {\n                var resources = this.resources;\n                var assignments = this.assignments;\n                var groupAssigments = function () {\n                    var data = assignments.dataSource.view();\n                    var group = { field: assignments.dataTaskIdField };\n                    data = new Query(data).group(group).toArray();\n                    return data;\n                };\n                var assigments = groupAssigments();\n                var applyTaskResource = function (task, action) {\n                    var taskId = task.get('id');\n                    kendo.setter(resources.field)(task, new ObservableArray([]));\n                    for (var i = 0, length = assigments.length; i < length; i++) {\n                        if (assigments[i].value === taskId) {\n                            action(task, assigments[i].items);\n                        }\n                    }\n                };\n                var wrapTask = function (task, items) {\n                    for (var j = 0, length = items.length; j < length; j++) {\n                        var item = items[j];\n                        var resource = resources.dataSource.get(item.get(assignments.dataResourceIdField));\n                        var resourceValue = item.get(assignments.dataValueField);\n                        var resourcedId = item.get(assignments.dataResourceIdField);\n                        var valueFormat = resource.get(resources.dataFormatField) || PERCENTAGE_FORMAT;\n                        var formatedValue = kendo.toString(resourceValue, valueFormat);\n                        task[resources.field].push(new ObservableObject({\n                            id: resourcedId,\n                            name: resource.get(resources.dataTextField),\n                            color: resource.get(resources.dataColorField),\n                            value: resourceValue,\n                            formatedValue: formatedValue\n                        }));\n                    }\n                };\n                for (var i = 0, length = taskTree.length; i < length; i++) {\n                    applyTaskResource(taskTree[i], wrapTask);\n                }\n            },\n            _wrapResourceData: function (id) {\n                var that = this;\n                var result = [];\n                var resource;\n                var resources = this.resources.dataSource.view();\n                var assignments = this.assignments.dataSource.view();\n                var taskAssignments = new Query(assignments).filter({\n                    field: that.assignments.dataTaskIdField,\n                    operator: 'eq',\n                    value: id\n                }).toArray();\n                var valuePerResource = function (id) {\n                    var resourceValue = null;\n                    new Query(taskAssignments).filter({\n                        field: that.assignments.dataResourceIdField,\n                        operator: 'eq',\n                        value: id\n                    }).select(function (assignment) {\n                        resourceValue += assignment.get(that.assignments.dataValueField);\n                    });\n                    return resourceValue;\n                };\n                for (var i = 0, length = resources.length; i < length; i++) {\n                    resource = resources[i];\n                    result.push({\n                        id: resource.get('id'),\n                        name: resource.get(that.resources.dataTextField),\n                        format: resource.get(that.resources.dataFormatField) || PERCENTAGE_FORMAT,\n                        value: valuePerResource(resource.id)\n                    });\n                }\n                return result;\n            },\n            _syncDataSource: function () {\n                this._preventRefresh = false;\n                this._requestStart();\n                this.dataSource.sync();\n            },\n            _requestStart: function () {\n                this._progress(true);\n            },\n            _error: function () {\n                this._progress(false);\n            },\n            _progress: function (toggle) {\n                kendo.ui.progress(this.element, toggle);\n            },\n            _resizable: function () {\n                var that = this;\n                var wrapper = this.wrapper;\n                var ganttStyles = Gantt.styles;\n                var contentSelector = DOT + ganttStyles.gridContent;\n                var treeListWrapper = wrapper.find(DOT + ganttStyles.list);\n                var timelineWrapper = wrapper.find(DOT + ganttStyles.timeline);\n                var treeListWidth;\n                var timelineWidth;\n                var timelineScroll;\n                this._resizeDraggable = wrapper.find(DOT + ganttStyles.splitBar).height(treeListWrapper.height()).hover(function () {\n                    $(this).addClass(ganttStyles.splitBarHover);\n                }, function () {\n                    $(this).removeClass(ganttStyles.splitBarHover);\n                }).end().kendoResizable({\n                    orientation: 'horizontal',\n                    handle: DOT + ganttStyles.splitBar,\n                    'start': function () {\n                        treeListWidth = treeListWrapper.width();\n                        timelineWidth = timelineWrapper.width();\n                        timelineScroll = kendo.scrollLeft(timelineWrapper.find(contentSelector));\n                    },\n                    'resize': function (e) {\n                        var delta = e.x.initialDelta;\n                        if (kendo.support.isRtl(wrapper)) {\n                            delta *= -1;\n                        }\n                        if (treeListWidth + delta < 0 || timelineWidth - delta < 0) {\n                            return;\n                        }\n                        treeListWrapper.width(treeListWidth + delta);\n                        timelineWrapper.width(timelineWidth - delta);\n                        kendo.scrollLeft(timelineWrapper.find(contentSelector), timelineScroll + delta);\n                        that.timeline.view()._renderCurrentTime();\n                    }\n                }).data('kendoResizable');\n            },\n            _scrollable: function () {\n                var that = this;\n                var ganttStyles = Gantt.styles;\n                var contentSelector = DOT + ganttStyles.gridContent;\n                var headerSelector = DOT + ganttStyles.gridHeaderWrap;\n                var timelineHeader = this.timeline.element.find(headerSelector);\n                var timelineContent = this.timeline.element.find(contentSelector);\n                var treeListHeader = this.list.element.find(headerSelector);\n                var treeListContent = this.list.element.find(contentSelector);\n                if (mobileOS) {\n                    treeListContent.css('overflow-y', 'auto');\n                }\n                timelineContent.on('scroll', function () {\n                    that.scrollTop = this.scrollTop;\n                    kendo.scrollLeft(timelineHeader, this.scrollLeft);\n                    treeListContent.scrollTop(this.scrollTop);\n                });\n                treeListContent.on('scroll', function () {\n                    kendo.scrollLeft(treeListHeader, this.scrollLeft);\n                }).on('DOMMouseScroll' + NS + ' mousewheel' + NS, function (e) {\n                    var scrollTop = timelineContent.scrollTop();\n                    var delta = kendo.wheelDeltaY(e);\n                    if (delta) {\n                        e.preventDefault();\n                        $(e.currentTarget).one('wheel' + NS, false);\n                        timelineContent.scrollTop(scrollTop + -delta);\n                    }\n                });\n            },\n            _navigatable: function () {\n                var that = this;\n                var navigatable = this.options.navigatable;\n                var editable = this.options.editable;\n                var ganttStyles = Gantt.styles;\n                var contentSelector = DOT + ganttStyles.gridContent;\n                var headerSelector = DOT + ganttStyles.gridHeaderWrap;\n                var headerTable = this.list.element.find(headerSelector).find('table');\n                var contentTable = this.list.element.find(contentSelector).find('table');\n                var isRtl = kendo.support.isRtl(this.wrapper);\n                var timelineContent = this.timeline.element.find(DOT + ganttStyles.gridContent);\n                var tables = headerTable.add(contentTable);\n                var attr = selector();\n                var cellIndex;\n                var expandState = {\n                    collapse: false,\n                    expand: true\n                };\n                var scroll = function (reverse) {\n                    var width = that.timeline.view()._timeSlots()[0].offsetWidth;\n                    kendo.scrollLeft(timelineContent, kendo.scrollLeft(timelineContent) + (reverse ? -width : width));\n                };\n                var scrollVertical = function (reverse) {\n                    var height = that.timeline.view()._rowHeight;\n                    timelineContent.scrollTop(timelineContent.scrollTop() + (reverse ? -height : height));\n                };\n                var moveVertical = function (method) {\n                    var parent = that.current.parent('tr' + selector());\n                    var index = that.current.index();\n                    var sibling = parent[method]('tr:visible').first();\n                    if (that.select().length !== 0) {\n                        that.clearSelection();\n                    }\n                    if (sibling.length !== 0) {\n                        that._current(sibling.children('td').eq(index));\n                        that._scrollTo(that.current);\n                    } else {\n                        if (that.current.is('td') && method == 'prevAll') {\n                            focusTable(headerTable);\n                        } else if (that.current.is('th') && method == 'nextAll') {\n                            focusTable(contentTable);\n                        }\n                    }\n                };\n                var moveHorizontal = function (method) {\n                    var subling = that.current[method]();\n                    if (subling.length !== 0) {\n                        that._current(subling);\n                        cellIndex = that.current.index();\n                    }\n                };\n                var toggleExpandedState = function (value) {\n                    var model = that.dataItem(that.current);\n                    if (model.summary && model.expanded !== value) {\n                        model.set('expanded', value);\n                    }\n                };\n                var deleteAction = function () {\n                    var editable = that.options.editable;\n                    if (!editable || editable.destroy === false || that.list.editor) {\n                        return;\n                    }\n                    var selectedTask = that.select();\n                    var uid = kendo.attr('uid');\n                    if (selectedTask.length) {\n                        that.removeTask(selectedTask.attr(uid));\n                    }\n                };\n                $(this.wrapper).on('mousedown' + NS, 'tr' + attr + ', div' + attr + ':not(' + DOT + ganttStyles.line + ')', function (e) {\n                    var currentTarget = $(e.currentTarget);\n                    var isInput = $(e.target).is(':button,a,:input,a>.k-icon,textarea,span.k-icon:not(.k-i-none),span.k-link,.k-input,.k-multiselect-wrap');\n                    var current;\n                    if (e.ctrlKey) {\n                        return;\n                    }\n                    if (navigatable) {\n                        if (currentTarget.is('tr')) {\n                            current = $(e.target).closest('td');\n                        } else {\n                            current = that.list.content.find('tr' + selector(currentTarget.attr(kendo.attr('uid'))) + ' > td').first();\n                        }\n                        that._current(current);\n                    }\n                    if ((navigatable || editable) && !isInput) {\n                        that._focusTimeout = setTimeout(function () {\n                            focusTable(that.list.content.find('table'), true);\n                        }, 2);\n                    }\n                }).on('keydown' + NS, function (e) {\n                    var key = e.keyCode;\n                    var that = this;\n                    var focusableItems = $(that._getToolbarItems());\n                    var idx = focusableItems.index(that.toolbar.find(DOT + ganttStyles.focused)[0]);\n                    if (idx === -1 && $(e.target).closest(DOT + ganttStyles.toolbar.views).length) {\n                        idx = focusableItems.index(that.toolbar.find('.k-gantt-views > .k-state-selected:visible, .k-views-dropdown:visible')[0]);\n                    }\n                    var itemToFocus = e.shiftKey ? focusableItems[idx - 1] : focusableItems[idx + 1];\n                    if (key === keys.F10) {\n                        that.toolbar.find('.k-button:visible').first().addClass(ganttStyles.focused).trigger('focus');\n                        e.preventDefault();\n                    } else if (key == keys.TAB && $(e.target).closest(DOT + ganttStyles.toolbar.toolbar).length) {\n                        that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused).trigger('blur');\n                        if (itemToFocus) {\n                            $(itemToFocus).addClass(ganttStyles.focused).trigger('focus');\n                            e.preventDefault();\n                            return;\n                        }\n                        if (this.list.element.is(':visible')) {\n                            this.list.element.find('table[role=treegrid]').trigger('focus');\n                        } else {\n                            this.element.find(DOT + ganttStyles.tasks)[0].focus();\n                        }\n                        e.preventDefault();\n                    }\n                }.bind(this));\n                if (navigatable !== true) {\n                    contentTable.on('keydown' + NS, function (e) {\n                        if (e.keyCode == keys.DELETE) {\n                            deleteAction();\n                        }\n                    });\n                    return;\n                }\n                tables.on('focus' + NS, function () {\n                    var selector = this === contentTable.get(0) ? 'td' : 'th';\n                    var selection = that.select();\n                    var current = that.current || $(selection.length ? selection : this).find(selector).eq(cellIndex || 0);\n                    that._current(current);\n                    $(that.toolbar.find(DOT + ganttStyles.focused)).removeClass(ganttStyles.focused);\n                }).on('blur' + NS, function () {\n                    that._current();\n                    if (this == headerTable) {\n                        $(this).attr(TABINDEX, -1);\n                    }\n                }).on('keydown' + NS, function (e) {\n                    var key = e.keyCode;\n                    var isCell;\n                    if (!that.current) {\n                        return;\n                    }\n                    isCell = that.current.is('td');\n                    switch (key) {\n                    case keys.RIGHT:\n                        e.preventDefault();\n                        if (e.altKey) {\n                            scroll();\n                        } else if (e.ctrlKey) {\n                            toggleExpandedState(isRtl ? expandState.collapse : expandState.expand);\n                        } else {\n                            moveHorizontal(isRtl ? 'prev' : 'next');\n                        }\n                        break;\n                    case keys.LEFT:\n                        e.preventDefault();\n                        if (e.altKey) {\n                            scroll(true);\n                        } else if (e.ctrlKey) {\n                            toggleExpandedState(isRtl ? expandState.expand : expandState.collapse);\n                        } else {\n                            moveHorizontal(isRtl ? 'next' : 'prev');\n                        }\n                        break;\n                    case keys.UP:\n                        e.preventDefault();\n                        if (e.altKey) {\n                            scrollVertical(true);\n                        } else {\n                            moveVertical('prevAll');\n                        }\n                        break;\n                    case keys.DOWN:\n                        e.preventDefault();\n                        if (e.altKey) {\n                            scrollVertical();\n                        } else {\n                            moveVertical('nextAll');\n                        }\n                        break;\n                    case keys.SPACEBAR:\n                        e.preventDefault();\n                        if (isCell) {\n                            that.select(that.current.closest('tr'));\n                        }\n                        break;\n                    case keys.ENTER:\n                        e.preventDefault();\n                        if (isCell) {\n                            if (that.options.editable && that.options.editable.update !== false) {\n                                that.list._startEditHandler(that.current);\n                                $(this).one('keyup', function (e) {\n                                    e.stopPropagation();\n                                });\n                            }\n                        } else {\n                            that.current.children('a.k-link').click();\n                        }\n                        break;\n                    case keys.DELETE:\n                        if (isCell) {\n                            deleteAction();\n                        }\n                        break;\n                    default:\n                        if (key >= 49 && key <= 57 && e.target.tagName.toLowerCase() !== 'input') {\n                            that.view(that.timeline._viewByIndex(key - 49));\n                        }\n                        break;\n                    }\n                });\n            },\n            _getToolbarItems: function () {\n                return this.toolbar.find('> .k-button:visible').toArray().concat(this.toolbar.find('.k-views-dropdown:visible').toArray(), this.toolbar.find('.k-gantt-views > .k-state-selected:visible').toArray());\n            },\n            _current: function (element) {\n                var ganttStyles = Gantt.styles;\n                var activeElement;\n                if (this.current && this.current.length) {\n                    this.current.removeClass(ganttStyles.focused).removeAttr('id');\n                }\n                if (element && element.length) {\n                    this.current = element.addClass(ganttStyles.focused).attr('id', ACTIVE_CELL);\n                    activeElement = $(kendo._activeElement());\n                    if (activeElement.is('table') && this.wrapper.find(activeElement).length > 0) {\n                        activeElement.removeAttr(ARIA_DESCENDANT).attr(ARIA_DESCENDANT, ACTIVE_CELL);\n                    }\n                } else {\n                    this.current = null;\n                }\n            },\n            _dataBind: function () {\n                var that = this;\n                if (that.options.autoBind) {\n                    this._preventRefresh = true;\n                    this._preventDependencyRefresh = true;\n                    var promises = $.map([\n                        this.dataSource,\n                        this.dependencies,\n                        this.resources.dataSource,\n                        this.assignments.dataSource\n                    ], function (dataSource) {\n                        return dataSource.fetch();\n                    });\n                    $.when.apply(null, promises).done(function () {\n                        that._preventRefresh = false;\n                        that._preventDependencyRefresh = false;\n                        that.refresh();\n                    });\n                }\n            },\n            _resize: function () {\n                this._adjustDimensions();\n                this.timeline.view()._adjustHeight();\n                this.timeline.view()._renderCurrentTime();\n                this.list._adjustHeight();\n            },\n            _createPlannedTasksSwitch: function () {\n                var that = this;\n                var switchLabel = that.options.messages.plannedTasks.switchText;\n                var toggeSwitchWrap = $('<span class=\\'k-gantt-planned-wrap\\'><label>' + switchLabel + '</label></span>');\n                var plannedToggle = new kendo.ui.Switch($('<input id=\\'planned-switch\\' class=\\'k-gantt-planned-switch\\'>'), {\n                    checked: that.options.showPlannedTasks,\n                    change: proxy(that._togglePlannedTasks, that),\n                    messages: {\n                        checked: '',\n                        unchecked: ''\n                    }\n                });\n                toggeSwitchWrap.append(plannedToggle.wrapper);\n                that.toggeSwitchWrap = toggeSwitchWrap;\n                that.toggleSwitch = plannedToggle;\n            },\n            _togglePlannedTasks: function (e) {\n                var timeline = this.timeline;\n                if (!this.trigger('togglePlannedTasks', { showPlannedTasks: !timeline.options.showPlannedTasks })) {\n                    this.wrapper.toggleClass(ganttStyles.plannedTasks);\n                    timeline._setPlanned(!timeline.options.showPlannedTasks);\n                    timeline._render(this.dataSource.taskTree());\n                    timeline._renderDependencies(this.dependencies.view());\n                } else {\n                    e.preventDefault();\n                }\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Gantt.fn);\n            Gantt.fn._drawPDF = function () {\n                var ganttStyles = Gantt.styles;\n                var listTableWidth = this.wrapper.find(DOT + ganttStyles.list + ' ' + DOT + ganttStyles.gridContent + '>table').width();\n                var content = this.wrapper.clone();\n                content.find(DOT + ganttStyles.list).css('width', listTableWidth);\n                return this._drawPDFShadow({ content: content }, { avoidLinks: this.options.pdf.avoidLinks });\n            };\n        }\n        kendo.ui.plugin(Gantt);\n        extend(true, Gantt, { styles: ganttStyles });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}